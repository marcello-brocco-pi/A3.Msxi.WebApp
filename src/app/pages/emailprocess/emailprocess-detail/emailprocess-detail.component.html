<p-toolbar>
    <div class="p-toolbar-group-left">
         <p-button 
            icon="pi pi-arrow-left" 
            severity="secondary" 
            (onClick)="goBack()"
            pTooltip="{{'Torna alla lista' | translate}}"
            class="mr-3"
        ></p-button>
    </div>
</p-toolbar>
<div style="margin-top:5px">
<p-accordion value="0"  [multiple]="false" [activeIndex]="0">
    <p-accordion-panel value="0">
        <p-accordion-header>{{"Dettagli Richiesta" | translate}}</p-accordion-header>
        <p-accordion-content>
            
 <!-- Chapters List -->
                <div class="grid grid-cols-1 gap-4 chapter-card">
                  @for (chapter of paragraphs; track chapter.rowIndex) {
                    <p-card>
                      <ng-template pTemplate="header">
                        <div class="flex justify-between items-center p-4 border-b">
                          <div class="flex items-center gap-3">
                            <span class="bg-blue-100 text-blue-800 text-sm font-semibold px-3 py-1 rounded">
                              {{ chapter.rowIndex }}
                            </span>
                            <h3 class="text-xl font-bold">
                              {{ chapter.title }}
                            </h3>
                          </div>
                          <div class="flex gap-2 ml-auto">
                            <p-button 
                              label="Edit"
                              icon="pi pi-pencil" 
                              severity="secondary"
                              size="small"
                              [hidden]="chapter.isInEditMode"
                              (onClick)="editChapter(chapter.rowIndex)"
                            ></p-button>
                                <p-button 
                                  label="Save"
                                  icon="pi pi-save"
                                  severity="primary"
                                  size="small"
                                  [hidden]="!chapter.isInEditMode"
                                  (onClick)="saveChapter(chapter.rowIndex)"
                                ></p-button>
                                <p-button 
                                  label="Cancel"
                                  icon="pi pi-times"
                                  severity="secondary"
                                  size="small"
                                  [hidden]="!chapter.isInEditMode"
                                  (onClick)="chapter.isInEditMode = false"
                                ></p-button>
                          </div>
                        </div>
                      </ng-template>
                      <!-- Chapter content without extra container -->
                      <p-editor [readonly]="!chapter.isInEditMode" [(ngModel)]="chapter.content" 
                      [style]="chapter.isInEditMode ? { height: '320px', border: '1px solid green' } : { height: '320px' }" />

                      <!-- <div [innerHTML]="chapter.content" class="prose max-w-none"></div> -->
                    </p-card>
                  }
                </div>            

        </p-accordion-content>            
    </p-accordion-panel>            
</p-accordion>

</div>
 